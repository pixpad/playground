const _0x29f9=['map','preventDefault','parentElement','height',')\x20hue-rotate(','onload',')\x20saturate(','floor','value','serialize','toString','lastElementChild','croppedImage','brightness(','dither','set','appendChild','button','putImageData','onerror','createImageData','createElement','backgroundColor','getElementById','reduce','drawImage','sample','100%','image/png','biggestDimension','change','className','\x20Pixels','split','innerHTML','querySelectorAll','output','deactivated','saturation','src','canvas','forEach','data','naturalHeight','.slider-input','toDataURL','getItem','push','rgb(','width','contrast','getContext','hue','filter','stringify','FloydSteinberg','naturalWidth','getImageData','#colors\x20button','onclick','#parameter-values','OPTION',')\x20contrast(','sliderValues','target','toggle','hasChildNodes','setItem','deg','colors','classList'];(function(_0x3137bc,_0x29f98e){const _0x5a0372=function(_0x1d5934){while(--_0x1d5934){_0x3137bc['push'](_0x3137bc['shift']());}};_0x5a0372(++_0x29f98e);}(_0x29f9,0x132));const _0x5a03=function(_0x3137bc,_0x29f98e){_0x3137bc=_0x3137bc-0x0;let _0x5a0372=_0x29f9[_0x3137bc];return _0x5a0372;};let renderPreview=()=>{let _0x1030f8=$(_0x5a03('0x26'))[_0x5a03('0x3a')]()[_0x5a03('0xb')]('&')[_0x5a03('0x31')](_0x2826e7=>_0x2826e7['split']('='))[_0x5a03('0x2')]((_0x571cc7,_0x49784a)=>({..._0x571cc7,[_0x49784a[0x0]]:_0x49784a[0x1]}),{});process(biggestDimension=parseInt(_0x1030f8[_0x5a03('0x7')]),brightness=parseInt(_0x1030f8['brightness'])+0x64+'%',contrast=parseInt(_0x1030f8[_0x5a03('0x1c')])+0x64+'%',hue=parseInt(_0x1030f8[_0x5a03('0x1e')])*1.8+_0x5a03('0x2e'),saturation=parseInt(_0x1030f8[_0x5a03('0x10')])+0x64+'%',dither=_0x1030f8[_0x5a03('0x3f')]?_0x5a03('0x21'):null,customPalette=palette);};$(_0x5a03('0x26'))[_0x5a03('0x8')](renderPreview);const updateTextInput=(_0x18e083,_0x5a5034)=>document[_0x5a03('0x1')](_0x5a5034)['innerHTML']=_0x18e083;const createSliderValues=()=>{const _0x213f7c=localStorage[_0x5a03('0x18')](_0x5a03('0x29'))?JSON['parse'](localStorage[_0x5a03('0x18')](_0x5a03('0x29'))):null;let _0x1d9afe=0x0;document[_0x5a03('0xd')]('.slider-input')[_0x5a03('0x13')](_0x30f3cf=>{const _0x32a6a9=_0x213f7c?_0x213f7c[_0x1d9afe]:0x0;_0x30f3cf['value']=_0x32a6a9;_0x30f3cf[_0x5a03('0x33')]['parentElement']['lastElementChild'][_0x5a03('0x3c')][_0x5a03('0xc')]=_0x32a6a9;_0x1d9afe++;});};const updateSliderValues=()=>{let _0x123119=[];document['querySelectorAll'](_0x5a03('0x16'))[_0x5a03('0x13')](_0x174412=>{_0x123119[_0x5a03('0x19')](_0x174412[_0x5a03('0x39')]);});localStorage['setItem'](_0x5a03('0x29'),JSON[_0x5a03('0x20')](_0x123119));};const rawPalette=[[0x0,0x0,0x0],[0x3c,0x3c,0x3c],[0x6e,0x6e,0x6e],[0xb4,0xb4,0xb4],[0xff,0xff,0xfe],[0xfa,0xe0,0xc5],[0xe8,0xa5,0x79],[0xff,0xe5,0x45],[0xb3,0x55,0x12],[0x54,0x36,0x29],[0xfc,0xb8,0xe2],[0xd6,0x15,0x69],[0x9f,0xd4,0x44],[0x4d,0xdb,0xff],[0x16,0x72,0xb5],[0xb,0x33,0x7d],[0xf2,0x51,0x24],[0xbf,0x1d,0x21],[0x70,0x23,0x2c],[0x7d,0x1c,0x8a]];let palette=[];const createPalette=()=>{palette=[];document[_0x5a03('0xd')](_0x5a03('0x24'))['forEach'](_0x2c19f3=>{if(_0x2c19f3[_0x5a03('0x9')]=='')palette[_0x5a03('0x19')](rawPalette[parseInt(_0x2c19f3['id'])]);});};const setButton=_0x3be0c8=>{let _0x2e2f86=document[_0x5a03('0x46')](_0x5a03('0x42'));document[_0x5a03('0x1')](_0x5a03('0x2f'))[_0x5a03('0x41')](_0x2e2f86);_0x2e2f86['style'][_0x5a03('0x0')]=_0x5a03('0x1a')+rawPalette[_0x3be0c8][_0x5a03('0x3b')]()+')';_0x2e2f86['id']=_0x3be0c8+'_btn';_0x2e2f86[_0x5a03('0x25')]=_0x2202ed=>{_0x2202ed[_0x5a03('0x32')]();_0x2202ed[_0x5a03('0x2a')][_0x5a03('0x30')][_0x5a03('0x2b')](_0x5a03('0xf'));createPalette();renderPreview();};};const createPaletteButtons=_0x1fa6d3=>{if(colors[_0x5a03('0x2c')]()){colors[_0x5a03('0xc')]='';}if(_0x1fa6d3===0x1){for(i=0x0;i<0x5;i++)setButton(i);}else{let _0x2ab0cc=0x0;for(i=0x0;i<rawPalette['length'];i++){setButton(i);if(_0x2ab0cc===0x4){colors[_0x5a03('0x41')](document[_0x5a03('0x46')]('br'));_0x2ab0cc=-0x1;}_0x2ab0cc++;}}};const getImage=_0x510455=>{return new Promise((_0x7ec520,_0x589c5f)=>{let _0x499193=new Image();_0x499193[_0x5a03('0x36')]=()=>_0x7ec520(_0x499193);_0x499193[_0x5a03('0x44')]=_0x589c5f;_0x499193['src']=_0x510455;});};const pixelate=async(_0x1b5a09,_0x34f675,_0x5e7755,_0x2d973b,_0x9b0aed)=>{const _0x50158d=await getImage(localStorage[_0x5a03('0x18')]('croppedImage'));let _0x2d3ee4=_0x50158d[_0x5a03('0x1b')];let _0x36b107=_0x50158d[_0x5a03('0x34')];let _0x39c46a=_0x2d3ee4;let _0x40c088=_0x36b107;if(_0x2d3ee4>_0x36b107){_0x36b107*=_0x1b5a09/_0x2d3ee4;if(_0x1b5a09%0x32==0x0)_0x36b107=Math['floor'](_0x36b107-_0x36b107%0x32);else _0x36b107=Math['floor'](_0x36b107-_0x36b107%0x20);_0x2d3ee4=_0x1b5a09;_0x40c088=_0x39c46a*_0x36b107/_0x2d3ee4;}else{_0x2d3ee4*=_0x1b5a09/_0x36b107;if(_0x1b5a09%0x32==0x0)_0x2d3ee4=Math[_0x5a03('0x38')](_0x2d3ee4-_0x2d3ee4%0x32);else _0x2d3ee4=Math[_0x5a03('0x38')](_0x2d3ee4-_0x2d3ee4%0x20);_0x36b107=_0x1b5a09;_0x39c46a=_0x40c088*_0x2d3ee4/_0x36b107;}let _0x28b4cb=document[_0x5a03('0x46')](_0x5a03('0x12'));_0x28b4cb[_0x5a03('0x1b')]=_0x2d3ee4;_0x28b4cb[_0x5a03('0x34')]=_0x36b107;let _0x10d9da=_0x28b4cb[_0x5a03('0x1d')]('2d');_0x10d9da[_0x5a03('0x1f')]=_0x5a03('0x3e')+_0x34f675+_0x5a03('0x28')+_0x5e7755+_0x5a03('0x35')+_0x2d973b+_0x5a03('0x37')+_0x9b0aed+')';_0x10d9da[_0x5a03('0x3')](_0x50158d,0x0,0x0,_0x39c46a,_0x40c088,0x0,0x0,_0x2d3ee4,_0x36b107);let _0x5c9657=_0x28b4cb[_0x5a03('0x17')](_0x5a03('0x6'));document[_0x5a03('0x1')](_0x5a03('0xe'))[_0x5a03('0x11')]=_0x5c9657;};let quantize=(_0x239128,_0x41b33e)=>{let _0x5a38eb=new RgbQuant({'palette':_0x41b33e,'dithKern':_0x239128});let _0x18ff1c=document[_0x5a03('0x1')]('output');_0x5a38eb[_0x5a03('0x4')](_0x18ff1c,0x64);_0x5a38eb['palette']();let _0x133da3=_0x5a38eb[_0x5a03('0x2')](_0x18ff1c);let _0x3a015d=document['createElement'](_0x5a03('0x12'));let _0x5b8639=_0x18ff1c[_0x5a03('0x22')];let _0x2ebf13=_0x18ff1c[_0x5a03('0x15')];_0x3a015d[_0x5a03('0x1b')]=_0x5b8639;_0x3a015d['height']=_0x2ebf13;let _0x6d33d9=_0x3a015d[_0x5a03('0x1d')]('2d');let _0x12280a=_0x6d33d9[_0x5a03('0x45')](_0x5b8639,_0x2ebf13);_0x12280a[_0x5a03('0x14')][_0x5a03('0x40')](_0x133da3);_0x6d33d9[_0x5a03('0x43')](_0x12280a,0x0,0x0);const _0x29b993=_0x6d33d9[_0x5a03('0x23')](0x0,0x0,_0x5b8639,_0x2ebf13);const _0x21b77b=_0x29b993[_0x5a03('0x14')];let _0xfd6b96=[];for(let _0x256f9e=0x0;_0x256f9e<_0x29b993[_0x5a03('0x34')]*_0x29b993[_0x5a03('0x1b')]*0x4;_0x256f9e+=_0x29b993[_0x5a03('0x1b')]*0x4){let _0x1e8c1f=[];for(let _0x3de059=0x0;_0x3de059<_0x29b993[_0x5a03('0x1b')]*0x4;_0x3de059+=0x4){_0x1e8c1f[_0x5a03('0x19')]([_0x256f9e+'_'+_0x3de059,_0x5a03('0x1a')+_0x21b77b[_0x256f9e+_0x3de059]+','+_0x21b77b[_0x256f9e+_0x3de059+0x1]+','+_0x21b77b[_0x256f9e+_0x3de059+0x2]+')']);}_0xfd6b96['push'](_0x1e8c1f);}localStorage[_0x5a03('0x2d')](_0x5a03('0x12'),JSON[_0x5a03('0x20')](_0xfd6b96));let _0x131a97=_0x3a015d['toDataURL'](_0x5a03('0x6'));document['getElementById']('output')[_0x5a03('0x11')]=_0x131a97;};const process=async(_0x2543af,_0x5dd720='100%',_0x42c047=_0x5a03('0x5'),_0x5ecdbc='0deg',_0x3d2ef7='100%',_0xa78752=null,_0x240be9=rawPalette)=>{await pixelate(_0x2543af,_0x5dd720,_0x42c047,_0x5ecdbc,_0x3d2ef7);quantize(_0xa78752,_0x240be9);};const createSelect=async()=>{const _0x2b6d50=[0x20,0x32,0x40,0x60,0x64,0x80];const _0x4741b1=await getImage(localStorage['getItem'](_0x5a03('0x3d')));const _0x882c2f=_0x4741b1[_0x5a03('0x1b')];const _0x3998ff=_0x4741b1[_0x5a03('0x34')];const _0x14c1de=_0x882c2f>_0x3998ff?_0x3998ff/_0x882c2f:_0x882c2f/_0x3998ff;const _0x3f0b2f=document[_0x5a03('0x1')]('biggestDimension');for(val of _0x2b6d50){if(val*_0x14c1de%0x20==0x0||val*_0x14c1de%0x32==0x0){const _0x463e5a=document[_0x5a03('0x46')](_0x5a03('0x27'));_0x3f0b2f['appendChild'](_0x463e5a);_0x463e5a['value']=val;_0x463e5a[_0x5a03('0xc')]=val+_0x5a03('0xa');}}return _0x3f0b2f[_0x5a03('0x39')];};$(document)['ready'](async()=>{createSliderValues();await createSelect();createPaletteButtons(0x0);createPalette();renderPreview();});