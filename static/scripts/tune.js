const _0x2276=['100%','filter','toString','style','createImageData','deg','getImageData','height',')\x20contrast(','hasChildNodes','palette','set','getContext','image/png','output','brightness','onerror','setItem','floor','querySelectorAll','deactivated','forEach','map','#parameter-values','createElement','colors','rgb(','data','split','putImageData','src','classList','getItem','FloydSteinberg','naturalWidth','backgroundColor','appendChild','reduce',')\x20hue-rotate(','croppedImage','preventDefault',')\x20saturate(','length','brightness(','saturation','target','stringify','getElementById','width','sample','_btn','innerHTML','button','className','serialize','drawImage','toDataURL','hue','push','canvas'];(function(_0x1dbd2f,_0x22760e){const _0x7c44f7=function(_0x200c5f){while(--_0x200c5f){_0x1dbd2f['push'](_0x1dbd2f['shift']());}};_0x7c44f7(++_0x22760e);}(_0x2276,0x6b));const _0x7c44=function(_0x1dbd2f,_0x22760e){_0x1dbd2f=_0x1dbd2f-0x0;let _0x7c44f7=_0x2276[_0x1dbd2f];return _0x7c44f7;};let renderPreview=()=>{let _0x4c5adc=$(_0x7c44('0x24'))[_0x7c44('0x7')]()[_0x7c44('0x29')]('&')[_0x7c44('0x23')](_0x242096=>_0x242096[_0x7c44('0x29')]('='))['reduce']((_0x33b292,_0xe8de3e)=>({..._0x33b292,[_0xe8de3e[0x0]]:_0xe8de3e[0x1]}),{});process(biggestDimension=parseInt(_0x4c5adc['biggestDimension']),brightness=parseInt(_0x4c5adc[_0x7c44('0x1c')])+0x64+'%',contrast=parseInt(_0x4c5adc['contrast'])+0x64+'%',hue=parseInt(_0x4c5adc[_0x7c44('0xa')])*1.8+_0x7c44('0x12'),saturation=parseInt(_0x4c5adc[_0x7c44('0x39')])+0x64+'%',dither=_0x4c5adc['dither']?_0x7c44('0x2e'):null,customPalette=palette);};$(_0x7c44('0x24'))['change'](renderPreview);const updateTextInput=(_0x480d10,_0x44258d)=>document[_0x7c44('0x0')](_0x44258d)[_0x7c44('0x4')]=_0x480d10;const rawPalette=[[0x0,0x0,0x0],[0x3c,0x3c,0x3c],[0x6e,0x6e,0x6e],[0xb4,0xb4,0xb4],[0xff,0xff,0xfe],[0xfa,0xe0,0xc5],[0xe8,0xa5,0x79],[0xff,0xe5,0x45],[0xb3,0x55,0x12],[0x54,0x36,0x29],[0xfc,0xb8,0xe2],[0xd6,0x15,0x69],[0x9f,0xd4,0x44],[0x4d,0xdb,0xff],[0x16,0x72,0xb5],[0xb,0x33,0x7d],[0xf2,0x51,0x24],[0xbf,0x1d,0x21],[0x70,0x23,0x2c],[0x7d,0x1c,0x8a]];let palette=[];const createPalette=()=>{palette=[];document[_0x7c44('0x20')]('#colors\x20button')[_0x7c44('0x22')](_0x388562=>{if(_0x388562[_0x7c44('0x6')]=='')palette['push'](rawPalette[parseInt(_0x388562['id'])]);});};const setButton=_0x4d7e61=>{let _0x1e8710=document[_0x7c44('0x25')](_0x7c44('0x5'));document[_0x7c44('0x0')](_0x7c44('0x26'))[_0x7c44('0x31')](_0x1e8710);_0x1e8710[_0x7c44('0x10')][_0x7c44('0x30')]=_0x7c44('0x27')+rawPalette[_0x4d7e61][_0x7c44('0xf')]()+')';_0x1e8710['id']=_0x4d7e61+_0x7c44('0x3');_0x1e8710['onclick']=_0x53543f=>{_0x53543f[_0x7c44('0x35')]();_0x53543f[_0x7c44('0x3a')][_0x7c44('0x2c')]['toggle'](_0x7c44('0x21'));createPalette();renderPreview();};};const createPaletteButtons=_0x465e3c=>{if(colors[_0x7c44('0x16')]()){colors[_0x7c44('0x4')]='';}if(_0x465e3c===0x1){for(i=0x0;i<0x5;i++)setButton(i);}else{let _0x33ad20=0x0;for(i=0x0;i<rawPalette[_0x7c44('0x37')];i++){setButton(i);if(_0x33ad20===0x4){colors[_0x7c44('0x31')](document['createElement']('br'));_0x33ad20=-0x1;}_0x33ad20++;}}};const getImage=_0x197a48=>{return new Promise((_0x29c487,_0x369fdb)=>{let _0x5ef3d2=new Image();_0x5ef3d2['onload']=()=>_0x29c487(_0x5ef3d2);_0x5ef3d2[_0x7c44('0x1d')]=_0x369fdb;_0x5ef3d2['src']=_0x197a48;});};const pixelate=async(_0x413378,_0x350d79,_0x4f8439,_0x18dd84,_0x2ecca9)=>{const _0x3a5c03=await getImage(localStorage[_0x7c44('0x2d')]('croppedImage'));let _0x18fe6a=_0x3a5c03[_0x7c44('0x1')];let _0x26cdbc=_0x3a5c03[_0x7c44('0x14')];let _0x593606=_0x18fe6a;let _0xab5cef=_0x26cdbc;if(_0x18fe6a>_0x26cdbc){_0x26cdbc*=_0x413378/_0x18fe6a;if(_0x413378%0x32==0x0)_0x26cdbc=Math[_0x7c44('0x1f')](_0x26cdbc-_0x26cdbc%0x32);else _0x26cdbc=Math[_0x7c44('0x1f')](_0x26cdbc-_0x26cdbc%0x20);_0x18fe6a=_0x413378;_0xab5cef=_0x593606*_0x26cdbc/_0x18fe6a;}else{_0x18fe6a*=_0x413378/_0x26cdbc;if(_0x413378%0x32==0x0)_0x18fe6a=Math[_0x7c44('0x1f')](_0x18fe6a-_0x18fe6a%0x32);else _0x18fe6a=Math['floor'](_0x18fe6a-_0x18fe6a%0x20);_0x26cdbc=_0x413378;_0x593606=_0xab5cef*_0x18fe6a/_0x26cdbc;}let _0x3ad710=document[_0x7c44('0x25')](_0x7c44('0xc'));_0x3ad710[_0x7c44('0x1')]=_0x18fe6a;_0x3ad710[_0x7c44('0x14')]=_0x26cdbc;let _0x2cb8f6=_0x3ad710['getContext']('2d');_0x2cb8f6[_0x7c44('0xe')]=_0x7c44('0x38')+_0x350d79+_0x7c44('0x15')+_0x4f8439+_0x7c44('0x33')+_0x18dd84+_0x7c44('0x36')+_0x2ecca9+')';_0x2cb8f6[_0x7c44('0x8')](_0x3a5c03,0x0,0x0,_0x593606,_0xab5cef,0x0,0x0,_0x18fe6a,_0x26cdbc);let _0x213ef8=_0x3ad710[_0x7c44('0x9')](_0x7c44('0x1a'));document[_0x7c44('0x0')](_0x7c44('0x1b'))[_0x7c44('0x2b')]=_0x213ef8;};let quantize=(_0x19b67f,_0x335157)=>{let _0x2c9b1a=new RgbQuant({'palette':_0x335157,'dithKern':_0x19b67f});let _0x14e3ab=document[_0x7c44('0x0')](_0x7c44('0x1b'));_0x2c9b1a[_0x7c44('0x2')](_0x14e3ab,0x64);let _0x347b67=_0x2c9b1a[_0x7c44('0x17')]();let _0xdf7f0e=_0x2c9b1a[_0x7c44('0x32')](_0x14e3ab);let _0x5b8cbf=document[_0x7c44('0x25')](_0x7c44('0xc'));let _0x5bc779=_0x14e3ab[_0x7c44('0x2f')];let _0x147822=_0x14e3ab['naturalHeight'];_0x5b8cbf[_0x7c44('0x1')]=_0x5bc779;_0x5b8cbf[_0x7c44('0x14')]=_0x147822;let _0x2258c1=_0x5b8cbf[_0x7c44('0x19')]('2d');let _0xafe444=_0x2258c1[_0x7c44('0x11')](_0x5bc779,_0x147822);_0xafe444[_0x7c44('0x28')][_0x7c44('0x18')](_0xdf7f0e);_0x2258c1[_0x7c44('0x2a')](_0xafe444,0x0,0x0);const _0x44ec6b=_0x2258c1[_0x7c44('0x13')](0x0,0x0,_0x5bc779,_0x147822);const _0x2a0bca=_0x44ec6b['data'];let _0x1bbfb1=[];for(let _0x4d6831=0x0;_0x4d6831<_0x44ec6b[_0x7c44('0x14')]*_0x44ec6b[_0x7c44('0x1')]*0x4;_0x4d6831+=_0x44ec6b[_0x7c44('0x1')]*0x4){let _0x33a0db=[];for(let _0x5222f8=0x0;_0x5222f8<_0x44ec6b[_0x7c44('0x1')]*0x4;_0x5222f8+=0x4){_0x33a0db[_0x7c44('0xb')]([_0x4d6831+'_'+_0x5222f8,_0x7c44('0x27')+_0x2a0bca[_0x4d6831+_0x5222f8]+','+_0x2a0bca[_0x4d6831+_0x5222f8+0x1]+','+_0x2a0bca[_0x4d6831+_0x5222f8+0x2]+')']);}_0x1bbfb1[_0x7c44('0xb')](_0x33a0db);}localStorage[_0x7c44('0x1e')](_0x7c44('0xc'),JSON[_0x7c44('0x3b')](_0x1bbfb1));let _0x2829ea=_0x5b8cbf[_0x7c44('0x9')](_0x7c44('0x1a'));localStorage['setItem'](_0x7c44('0x34'),_0x2829ea);document['getElementById'](_0x7c44('0x1b'))[_0x7c44('0x2b')]=_0x2829ea;};const process=async(_0x56c6d8=0x40,_0x5e3a0b=_0x7c44('0xd'),_0x7414f3=_0x7c44('0xd'),_0x4a2c3c='0deg',_0x10788e=_0x7c44('0xd'),_0x1a6ab1=null,_0x36e604=rawPalette)=>{await pixelate(_0x56c6d8,_0x5e3a0b,_0x7414f3,_0x4a2c3c,_0x10788e);quantize(_0x1a6ab1,_0x36e604);};$(document)['ready'](()=>{createPaletteButtons(0x0);createPalette();process();});